\ProvidesPackage{statemachine}

\usepackage{style}

\usepackage{standalone}
\usepackage{tikz}
\usetikzlibrary{arrows,positioning}

% state in a statemachine
\newcommand{\State}[3]{\node [state,#2] (#1) {\begin{tabular}{l}#3\end{tabular}};}

% point in a statemachine
\newcommand{\Point}[2]{\node [point,#2] (#1) {};}

% edge in a statemachine
\newcommand{\Edge}[4]{\draw[#1] (#2) -- node[above] {#4} (#3);}

% another edge in a statemachine
\newcommand{\Longedge}[9]{\draw[#1] (#2) |- node[#6] {#7} (#3);
\draw[#5] (#3) -| node[#8] {#9} (#4);}

% statemachine
\newcommand{\Statemachine}[2]{%
\vspace{15pt}
\begin{tikzpicture}[auto,>=triangle 45]
\tikzset{state/.style={draw,shape=rectangle,rounded corners=5pt,align=center,minimum width=2cm,minimum height=1cm},point/.style={coordinate}}
#1
#2
\end{tikzpicture}
}
